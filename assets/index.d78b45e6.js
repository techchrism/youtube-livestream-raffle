const ke=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerpolicy&&(i.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?i.credentials="include":l.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(l){if(l.ep)return;l.ep=!0;const i=n(l);fetch(l.href,i)}};ke();const I={};function Ne(e){I.context=e}const Pe=(e,t)=>e===t,Ae=Symbol("solid-proxy"),Ie=Symbol("solid-track"),X={equals:Pe};let be=xe;const F={},D=1,Z=2,ve={owned:null,cleanups:null,context:null,owner:null};var S=null;let H=null,w=null,W=null,C=null,A=null,ie=0;function Q(e,t){const n=w,s=S,l=e.length===0,i=l?ve:{owned:null,cleanups:null,context:null,owner:t||s},c=l?e:()=>e(()=>ue(i));S=i,w=null;try{return ae(c,!0)}finally{w=n,S=s}}function P(e,t){t=t?Object.assign({},X,t):X;const n={value:e,observers:null,observerSlots:null,pending:F,comparator:t.equals||void 0},s=l=>(typeof l=="function"&&(l=l(n.pending!==F?n.pending:n.value)),re(n,l));return[ye.bind(n),s]}function L(e,t,n){const s=ce(e,t,!1,D);J(s)}function Le(e,t,n){be=Ue;const s=ce(e,t,!1,D);s.user=!0,A?A.push(s):J(s)}function T(e,t,n){n=n?Object.assign({},X,n):X;const s=ce(e,t,!0,0);return s.pending=F,s.observers=null,s.observerSlots=null,s.comparator=n.equals||void 0,J(s),ye.bind(s)}function Te(e){if(W)return e();let t;const n=W=[];try{t=e()}finally{W=null}return ae(()=>{for(let s=0;s<n.length;s+=1){const l=n[s];if(l.pending!==F){const i=l.pending;l.pending=F,re(l,i)}}},!1),t}function V(e){let t,n=w;return w=null,t=e(),w=n,t}function we(e){Le(()=>V(e))}function oe(e){return S===null||(S.cleanups===null?S.cleanups=[e]:S.cleanups.push(e)),e}function Ee(e){const t=T(e);return T(()=>le(t()))}function ye(){const e=H;if(this.sources&&(this.state||e)){const t=C;C=null,this.state===D||e?J(this):z(this),C=t}if(w){const t=this.observers?this.observers.length:0;w.sources?(w.sources.push(this),w.sourceSlots.push(t)):(w.sources=[this],w.sourceSlots=[t]),this.observers?(this.observers.push(w),this.observerSlots.push(w.sources.length-1)):(this.observers=[w],this.observerSlots=[w.sources.length-1])}return this.value}function re(e,t,n){if(W)return e.pending===F&&W.push(e),e.pending=t,t;if(e.comparator&&e.comparator(e.value,t))return t;let s=!1;return e.value=t,e.observers&&e.observers.length&&ae(()=>{for(let l=0;l<e.observers.length;l+=1){const i=e.observers[l];s&&H.disposed.has(i),(s&&!i.tState||!s&&!i.state)&&(i.pure?C.push(i):A.push(i),i.observers&&$e(i)),s||(i.state=D)}if(C.length>1e6)throw C=[],new Error},!1),t}function J(e){if(!e.fn)return;ue(e);const t=S,n=w,s=ie;w=S=e,Me(e,e.value,s),w=n,S=t}function Me(e,t,n){let s;try{s=e.fn(t)}catch(l){Se(l)}(!e.updatedAt||e.updatedAt<=n)&&(e.observers&&e.observers.length?re(e,s):e.value=s,e.updatedAt=n)}function ce(e,t,n,s=D,l){const i={fn:e,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:S,context:null,pure:n};return S===null||S!==ve&&(S.owned?S.owned.push(i):S.owned=[i]),i}function G(e){const t=H;if(e.state===0||t)return;if(e.state===Z||t)return z(e);if(e.suspense&&V(e.suspense.inFallback))return e.suspense.effects.push(e);const n=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<ie);)(e.state||t)&&n.push(e);for(let s=n.length-1;s>=0;s--)if(e=n[s],e.state===D||t)J(e);else if(e.state===Z||t){const l=C;C=null,z(e,n[0]),C=l}}function ae(e,t){if(C)return e();let n=!1;t||(C=[]),A?n=!0:A=[],ie++;try{const s=e();return Re(n),s}catch(s){C||(A=null),Se(s)}}function Re(e){C&&(xe(C),C=null),!e&&(A.length?Te(()=>{be(A),A=null}):A=null)}function xe(e){for(let t=0;t<e.length;t++)G(e[t])}function Ue(e){let t,n=0;for(t=0;t<e.length;t++){const l=e[t];l.user?e[n++]=l:G(l)}I.context&&Ne();const s=e.length;for(t=0;t<n;t++)G(e[t]);for(t=s;t<e.length;t++)G(e[t])}function z(e,t){const n=H;e.state=0;for(let s=0;s<e.sources.length;s+=1){const l=e.sources[s];l.sources&&(l.state===D||n?l!==t&&G(l):(l.state===Z||n)&&z(l,t))}}function $e(e){const t=H;for(let n=0;n<e.observers.length;n+=1){const s=e.observers[n];(!s.state||t)&&(s.state=Z,s.pure?C.push(s):A.push(s),s.observers&&$e(s))}}function ue(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),s=e.sourceSlots.pop(),l=n.observers;if(l&&l.length){const i=l.pop(),c=n.observerSlots.pop();s<l.length&&(i.sourceSlots[c]=s,l[s]=i,n.observerSlots[s]=c)}}if(e.owned){for(t=0;t<e.owned.length;t++)ue(e.owned[t]);e.owned=null}if(e.cleanups){for(t=0;t<e.cleanups.length;t++)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function Se(e){throw e}function le(e){if(typeof e=="function"&&!e.length)return le(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const s=le(e[n]);Array.isArray(s)?t.push.apply(t,s):t.push(s)}return t}return e}const De=Symbol("fallback");function he(e){for(let t=0;t<e.length;t++)e[t]()}function Oe(e,t,n={}){let s=[],l=[],i=[],c=0,o=t.length>1?[]:null;return oe(()=>he(i)),()=>{let f=e()||[],u,r;return f[Ie],V(()=>{let d=f.length,g,a,p,m,$,b,_,k,N;if(d===0)c!==0&&(he(i),i=[],s=[],l=[],c=0,o&&(o=[])),n.fallback&&(s=[De],l[0]=Q(R=>(i[0]=R,n.fallback())),c=1);else if(c===0){for(l=new Array(d),r=0;r<d;r++)s[r]=f[r],l[r]=Q(h);c=d}else{for(p=new Array(d),m=new Array(d),o&&($=new Array(d)),b=0,_=Math.min(c,d);b<_&&s[b]===f[b];b++);for(_=c-1,k=d-1;_>=b&&k>=b&&s[_]===f[k];_--,k--)p[k]=l[_],m[k]=i[_],o&&($[k]=o[_]);for(g=new Map,a=new Array(k+1),r=k;r>=b;r--)N=f[r],u=g.get(N),a[r]=u===void 0?-1:u,g.set(N,r);for(u=b;u<=_;u++)N=s[u],r=g.get(N),r!==void 0&&r!==-1?(p[r]=l[u],m[r]=i[u],o&&($[r]=o[u]),r=a[r],g.set(N,r)):i[u]();for(r=b;r<d;r++)r in p?(l[r]=p[r],i[r]=m[r],o&&(o[r]=$[r],o[r](r))):l[r]=Q(h);l=l.slice(0,c=d),s=f.slice(0)}return l});function h(d){if(i[r]=d,o){const[g,a]=P(r);return o[r]=a,t(f[r],g)}return t(f[r])}}}function v(e,t){return V(()=>e(t||{}))}function Y(){return!0}const Be={get(e,t,n){return t===Ae?n:e.get(t)},has(e,t){return e.has(t)},set:Y,deleteProperty:Y,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:Y,deleteProperty:Y}},ownKeys(e){return e.keys()}};function te(e){return(e=typeof e=="function"?e():e)==null?{}:e}function je(...e){return new Proxy({get(t){for(let n=e.length-1;n>=0;n--){const s=te(e[n])[t];if(s!==void 0)return s}},has(t){for(let n=e.length-1;n>=0;n--)if(t in te(e[n]))return!0;return!1},keys(){const t=[];for(let n=0;n<e.length;n++)t.push(...Object.keys(te(e[n])));return[...new Set(t)]}},Be)}function Fe(e){const t="fallback"in e&&{fallback:()=>e.fallback};return T(Oe(()=>e.each,e.children,t||void 0))}function M(e){let t=!1;const n=T(()=>e.when,void 0,{equals:(s,l)=>t?s===l:!s==!l});return T(()=>{const s=n();if(s){const l=e.children;return(t=typeof l=="function"&&l.length>0)?V(()=>l(s)):l}return e.fallback})}function Ve(e){let t=!1;const n=Ee(()=>e.children),s=T(()=>{let l=n();Array.isArray(l)||(l=[l]);for(let i=0;i<l.length;i++){const c=l[i].when;if(c)return[i,c,l[i]]}return[-1]},void 0,{equals:(l,i)=>l[0]===i[0]&&(t?l[1]===i[1]:!l[1]==!i[1])&&l[2]===i[2]});return T(()=>{const[l,i,c]=s();if(l<0)return e.fallback;const o=c.children;return(t=typeof o=="function"&&o.length>0)?V(()=>o(i)):o})}function ne(e){return e}function qe(e,t,n){let s=n.length,l=t.length,i=s,c=0,o=0,f=t[l-1].nextSibling,u=null;for(;c<l||o<i;){if(t[c]===n[o]){c++,o++;continue}for(;t[l-1]===n[i-1];)l--,i--;if(l===c){const r=i<s?o?n[o-1].nextSibling:n[i-o]:f;for(;o<i;)e.insertBefore(n[o++],r)}else if(i===o)for(;c<l;)(!u||!u.has(t[c]))&&t[c].remove(),c++;else if(t[c]===n[i-1]&&n[o]===t[l-1]){const r=t[--l].nextSibling;e.insertBefore(n[o++],t[c++].nextSibling),e.insertBefore(n[--i],r),t[l]=n[i]}else{if(!u){u=new Map;let h=o;for(;h<i;)u.set(n[h],h++)}const r=u.get(t[c]);if(r!=null)if(o<r&&r<i){let h=c,d=1,g;for(;++h<l&&h<i&&!((g=u.get(t[h]))==null||g!==r+d);)d++;if(d>r-o){const a=t[c];for(;o<r;)e.insertBefore(n[o++],a)}else e.replaceChild(n[o++],t[c++])}else c++;else t[c++].remove()}}}const ge="_$DX_DELEGATE";function Ke(e,t,n){let s;return Q(l=>{s=l,t===document?e():y(t,e(),t.firstChild?null:void 0,n)}),()=>{s(),t.textContent=""}}function x(e,t,n){const s=document.createElement("template");s.innerHTML=e;let l=s.content.firstChild;return n&&(l=l.firstChild),l}function q(e,t=window.document){const n=t[ge]||(t[ge]=new Set);for(let s=0,l=e.length;s<l;s++){const i=e[s];n.has(i)||(n.add(i),t.addEventListener(i,Ge))}}function We(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function y(e,t,n,s){if(n!==void 0&&!s&&(s=[]),typeof t!="function")return ee(e,t,s,n);L(l=>ee(e,t(),l,n),s)}function Ge(e){const t=`$$${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return n||document}}),I.registry&&!I.done&&(I.done=!0,document.querySelectorAll("[id^=pl-]").forEach(s=>s.remove()));n!==null;){const s=n[t];if(s&&!n.disabled){const l=n[`${t}Data`];if(l!==void 0?s.call(n,l,e):s.call(n,e),e.cancelBubble)return}n=n.host&&n.host!==n&&n.host instanceof Node?n.host:n.parentNode}}function ee(e,t,n,s,l){for(I.context&&!n&&(n=[...e.childNodes]);typeof n=="function";)n=n();if(t===n)return n;const i=typeof t,c=s!==void 0;if(e=c&&n[0]&&n[0].parentNode||e,i==="string"||i==="number"){if(I.context)return n;if(i==="number"&&(t=t.toString()),c){let o=n[0];o&&o.nodeType===3?o.data=t:o=document.createTextNode(t),n=j(e,n,s,o)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||i==="boolean"){if(I.context)return n;n=j(e,n,s)}else{if(i==="function")return L(()=>{let o=t();for(;typeof o=="function";)o=o();n=ee(e,o,n,s)}),()=>n;if(Array.isArray(t)){const o=[],f=n&&Array.isArray(n);if(se(o,t,n,l))return L(()=>n=ee(e,o,n,s,!0)),()=>n;if(I.context){for(let u=0;u<o.length;u++)if(o[u].parentNode)return n=o}if(o.length===0){if(n=j(e,n,s),c)return n}else f?n.length===0?pe(e,o,s):qe(e,n,o):(n&&j(e),pe(e,o));n=o}else if(t instanceof Node){if(I.context&&t.parentNode)return n=c?[t]:t;if(Array.isArray(n)){if(c)return n=j(e,n,s,t);j(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function se(e,t,n,s){let l=!1;for(let i=0,c=t.length;i<c;i++){let o=t[i],f=n&&n[i];if(o instanceof Node)e.push(o);else if(!(o==null||o===!0||o===!1))if(Array.isArray(o))l=se(e,o,f)||l;else if(typeof o=="function")if(s){for(;typeof o=="function";)o=o();l=se(e,Array.isArray(o)?o:[o],f)||l}else e.push(o),l=!0;else{const u=String(o);f&&f.nodeType===3&&f.data===u?e.push(f):e.push(document.createTextNode(u))}}return l}function pe(e,t,n){for(let s=0,l=t.length;s<l;s++)e.insertBefore(t[s],n)}function j(e,t,n,s){if(n===void 0)return e.textContent="";const l=s||document.createTextNode("");if(t.length){let i=!1;for(let c=t.length-1;c>=0;c--){const o=t[c];if(l!==o){const f=o.parentNode===e;!i&&!c?f?e.replaceChild(l,o):e.insertBefore(l,n):f&&o.remove()}else i=!0}}else e.insertBefore(l,n);return[l]}const Ce=atob("QUl6YVN5RGZKWnNWV0g5SV9fMURjQndUZ0x3Z3lXTjJRTVlscUxN");async function He(e){const t=new URL("https://www.googleapis.com/youtube/v3/videos");return t.search=new URLSearchParams({part:"snippet, liveStreamingDetails",id:e,key:Ce}).toString(),await(await fetch(t)).json()}class Je{constructor(t,n){this.active=!1,this.chatId=t,this.onChatBatch=n}start(t=!1){this.active||(this.active=!0,this.poll(null,t))}stop(){this.active&&(this.active=!1,clearTimeout(this.nextPollTimeout))}async poll(t,n=!1){const s=new URL("https://www.googleapis.com/youtube/v3/liveChat/messages"),l={liveChatId:this.chatId,maxResults:"2000",part:"id, snippet, authorDetails",key:Ce};t&&(l.pageToken=t),s.search=new URLSearchParams(l).toString();const i=await(await fetch(s)).json();this.active&&(t?this.onChatBatch(i.items):this.onChatBatch(i.items.slice(-5)),n||(this.nextPollTimeout=setTimeout(()=>{this.poll(i.nextPageToken)},i.pollingIntervalMillis)))}}const Ye=x('<div class="alert alert-error shadow-lg mt-2"></div>'),Qe=x('<div class="text-center"><label for="video-selection-url" class="label-text">Livestream URL</label><br><input type="url" id="video-selection-url" placeholder="Livestream URL" class="input input-bordered"><button class="btn btn-primary mx-2">Check</button></div>'),Xe=/^.*(?:(?:youtu\.be\/|v\/|vi\/|u\/\w\/|embed\/)|(?:(?:watch)?\?v(?:i)?=|\&v(?:i)?=))([^#\&\?]+).*/;function Ze(e){const[t,n]=P(!1),[s,l]=P(null);let i;const c=async()=>{l(null),n(!0);try{const f=i.value.trim().match(Xe);if(f===null)throw new Error("Invalid YouTube video url");const u=await He(f[1]);if(u.items.length===0)throw new Error("Could not find livestream");const r=u.items[0];if(r.snippet.liveBroadcastContent!=="live")throw new Error("Video is not live");e.setLiveInfo({title:r.snippet.title,thumbnail:r.snippet.thumbnails.default,chatId:r.liveStreamingDetails.activeLiveChatId})}catch(o){l(o)}finally{n(!1)}};return(()=>{const o=Qe.cloneNode(!0),f=o.firstChild,u=f.nextSibling,r=u.nextSibling,h=r.nextSibling,d=i;return typeof d=="function"?d(r):i=r,h.$$click=c,y(o,v(M,{get when(){return s()},get children(){const g=Ye.cloneNode(!0);return y(g,()=>s().toString()),g}}),null),L(()=>h.classList.toggle("loading",!!t())),o})()}q(["click"]);const ze=x('<div class="flex flex-col h-full gap-2"><textarea class="w-full flex-grow input input-bordered"></textarea><button class="btn">Copy</button></div>');function et(e){const[t,n]=P(!1),s=()=>e.selected.map(i=>i.name).join(`
`),l=async()=>{await navigator.clipboard.writeText(s()),n(!0)};return(()=>{const i=ze.cloneNode(!0),c=i.firstChild,o=c.nextSibling;return o.$$click=l,L(f=>{const u=!t(),r=!!t();return u!==f._v$&&o.classList.toggle("btn-primary",f._v$=u),r!==f._v$2&&o.classList.toggle("btn-success",f._v$2=r),f},{_v$:void 0,_v$2:void 0}),L(()=>c.value=s()),i})()}q(["click"]);const tt=x('<button class="btn btn-primary mx-2">Load Previous</button>'),nt=x('<label for="list-modal" class="btn btn-primary modal-button mx-2">Show Previous</label>'),lt=x(`<div class="flex flex-col items-center gap-4 m-2"><div class="text-center max-w-md"><h2>Instructions:</h2><ol class="list-decimal text-left my-2"><li>Enter the URL for the livestream and hit "check" to verify</li><li>Click "start" to begin watching chat</li><li>Once you've decided enough messages have been received, click "stop"</li><li>Select the messages you want to be entered (don't worry about duplicates)</li><li>Click "next" and tap to start the raffle!</li></ol><p>If anything messes up with the raffle, you can refresh the page and load the previous selected or copy their usernames</p></div><div>Source code: <a class="link" href="https://github.com/techchrism/youtube-livestream-raffle">https://github.com/techchrism/youtube-livestream-raffle</a></div><div><span>Selected livestream: </span></div><button class="btn btn-success">Start</button><div></div></div>`),st=x('<input type="checkbox" id="list-modal" class="modal-toggle">'),it=x('<div class="modal"><div class="modal-box h-full"><label for="list-modal" class="btn btn-sm btn-circle absolute right-2 top-2">\u2715</label></div></div>');function ot(e){const[t,n]=P(),[s,l]=P([]),i=T(()=>!!t()),c=()=>{e.onStart({chatId:t().chatId})},o=localStorage.getItem("previous");return o!==null&&l(JSON.parse(o)),[(()=>{const f=lt.cloneNode(!0),u=f.firstChild,r=u.nextSibling,h=r.nextSibling;h.firstChild;const d=h.nextSibling,g=d.nextSibling;return y(f,v(Ze,{setLiveInfo:n}),h),y(h,v(M,{get when(){return t()},fallback:"none",get children(){return t().title}}),null),d.$$click=c,y(g,v(M,{get when(){return s().length>0},get children(){return[v(M,{get when(){return e.loadPrevious!==void 0},get children(){const a=tt.cloneNode(!0);return a.$$click=()=>e.loadPrevious(s()),a}}),nt.cloneNode(!0)]}})),L(()=>d.classList.toggle("btn-disabled",!i())),f})(),st.cloneNode(!0),(()=>{const f=it.cloneNode(!0),u=f.firstChild;return u.firstChild,y(u,v(et,{get selected(){return s()}}),null),f})()]}q(["click"]);const rt=x('<input type="checkbox" class="checkbox">'),ct=x('<button class="w-full btn justify-start h-auto normal-case"><div class="flex flex-row items-center gap-x-2 min-w-0"><div class="overflow-clip rounded-full min-w-max min-h-max"><img class="h-6 w-6" alt="profile picture" referrerpolicy="no-referrer"></div><div class="text-neutral-content"></div><div class="my-3 break-words min-w-0 text-primary-content"></div></div></button>');function at(e){const t=je({checked:!1},e),n=()=>{t.setChecked(!t.checked)};return(()=>{const s=ct.cloneNode(!0),l=s.firstChild,i=l.firstChild,c=i.firstChild,o=i.nextSibling,f=o.nextSibling;return s.$$click=n,y(l,v(M,{get when(){return!e.disabled},get children(){const u=rt.cloneNode(!0);return L(()=>u.checked=t.checked),u}}),i),y(o,()=>e.message.authorDetails.displayName),y(f,()=>e.message.snippet.displayMessage),L(u=>{const r=!!e.disabled,h=e.message.authorDetails.profileImageUrl;return r!==u._v$&&s.classList.toggle("btn-disabled",u._v$=r),h!==u._v$2&&We(c,"src",u._v$2=h),u},{_v$:void 0,_v$2:void 0}),s})()}q(["click"]);const ut=x('<button class="btn btn-success">Next</button>'),ft=x('<div class="fixed m-3 w-full"><div class="flex flex-row items-center justify-center gap-x-2"><div class="badge badge-lg badge-info"> Messages</div><div class="badge badge-lg badge-info"> Selected Channels</div></div></div>'),dt=x('<ul class="mx-2 pt-16"></ul>'),ht=x('<button class="btn btn-error">Stop</button>'),gt=x('<li class="m-1"></li>');function pt(e){const[t,n]=P(!1),[s,l]=P([]),i=new Je(e.settings.chatId,r=>{l(h=>[...h,...r.filter(d=>d.snippet.type==="textMessageEvent").map(d=>({...d,selected:!1}))])}),c=T(()=>s().filter(r=>r.selected).map(r=>({id:r.authorDetails.channelId,name:r.authorDetails.displayName,profilePicture:r.authorDetails.profileImageUrl})).filter((r,h,d)=>d.findIndex(g=>g.id===r.id)===h));we(()=>{i.start()}),oe(()=>{i.stop()});const o=r=>{l(h=>h.map(d=>d===r?{...d,selected:!d.selected}:d))},f=()=>{n(r=>!r),i.stop()},u=()=>{localStorage.setItem("previous",JSON.stringify(c())),e.onNext(c())};return[(()=>{const r=ft.cloneNode(!0),h=r.firstChild,d=h.firstChild,g=d.firstChild,a=d.nextSibling,p=a.firstChild;return y(h,v(M,{get when(){return t()},get fallback(){return(()=>{const m=ht.cloneNode(!0);return m.$$click=f,m})()},get children(){const m=ut.cloneNode(!0);return m.$$click=u,m}}),d),y(d,()=>s().length,g),y(a,()=>c().length,p),r})(),(()=>{const r=dt.cloneNode(!0);return y(r,v(Fe,{get each(){return s()},children:h=>(()=>{const d=gt.cloneNode(!0);return y(d,v(at,{message:h,get checked(){return h.selected},get disabled(){return!t()},setChecked:g=>{o(h)}})),d})()})),r})()]}q(["click"]);const mt=x('<div class="flex items-stretch flex-col h-screen overflow-hidden"><h2 class="text-center font-bold text-xl mt-3"></h2><div class="flex-grow"><canvas class="w-full h-full"></canvas></div></div>'),bt=x('<input type="checkbox" id="winner-modal" class="modal-toggle">'),vt=x('<div class="flex flex-col items-center"><h3 class="font-bold text-lg">Congratulations <!>!</h3></div>'),wt=x('<div class="modal"><div class="modal-box"><div class="modal-action"><label for="winner-modal" class="btn">Yay!</label></div></div></div>');function yt(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}}const xt=Math.PI/10,me=[{color:"#E84855",textColor:"black"},{color:"#05C8FF",textColor:"black"},{color:"#F9DC5C",textColor:"black"},{color:"#0BBC61",textColor:"black"}];function $t(e){const t=[...e.initialSelected];yt(t);const[n,s]=P(t.map((a,p)=>{const m=new Image;return m.referrerPolicy="no-referrer",m.src=a.profilePicture,{...a,image:m,color:me[p%me.length]}})),[l,i]=P();let c,o,f=!0,u=Date.now(),r=0,h=-1;const d=()=>{const a=c.getContext("2d"),p=window.devicePixelRatio,m=getComputedStyle(c),$=parseFloat(m.getPropertyValue("height").slice(0,-2))*p,b=parseFloat(m.getPropertyValue("width").slice(0,-2))*p;c.height=$,c.width=b;const _=Date.now(),k=(_-u)/1e3;u=_;const N=n(),R=Math.PI*2/N.length;if(h===-1)r=(r+xt*k)%(Math.PI*2);else if(h!==0){r+=k*h,h*=.985;const O=(N.length-Math.floor((r+R/2)%(Math.PI*2)/R))%N.length;i(N[O]),h<.01&&(h=0,o.checked=!0)}const _e=10,U=Math.min($,b)/2-_e;a.save(),a.translate(b/2,$/2),a.save(),a.rotate(r);for(let O=0;O<N.length;O++){const B=N[O];a.save(),a.rotate(R*O),a.beginPath(),a.arc(0,0,U,R/-2,R/2),a.lineTo(0,0),a.closePath(),a.fillStyle=B.color.color,a.fill();const E=U/5-N.length/2;B.image.complete&&B.image.naturalWidth!==0&&(a.save(),a.translate(U-5+E*-1,E/-2),a.beginPath(),a.arc(E/2,E/2,E/2,2*Math.PI,0),a.clip(),a.drawImage(B.image,0,0,E,E),a.restore());const fe=U/10-N.length/2;a.font=`bold ${fe}px serif`,a.textAlign="right",a.fillStyle=B.color.textColor;const de=U-E-10;a.fillText(B.name,de,fe/4,de),a.restore()}a.restore(),a.save();const K=U/5;a.translate(U-K/2,0),a.beginPath(),a.lineTo(K,K),a.lineTo(K,-K),a.lineTo(0,0),a.fill(),a.restore(),a.restore(),f&&requestAnimationFrame(d)};we(()=>{d()}),oe(()=>{f=!1});const g=()=>{h=20+Math.random()*5};return[(()=>{const a=mt.cloneNode(!0),p=a.firstChild,m=p.nextSibling,$=m.firstChild;y(p,v(M,{get when(){return l()},get fallback(){return"Tap to Spin"},get children(){return l().name}})),$.$$click=g;const b=c;return typeof b=="function"?b($):c=$,a})(),(()=>{const a=bt.cloneNode(!0),p=o;return typeof p=="function"?p(a):o=a,a})(),(()=>{const a=wt.cloneNode(!0),p=a.firstChild,m=p.firstChild;return y(p,v(M,{get when(){return l()},get children(){const $=vt.cloneNode(!0),b=$.firstChild,_=b.firstChild,k=_.nextSibling;return k.nextSibling,y(b,()=>l().name,k),y($,()=>l().image,null),$}}),m),a})()]}q(["click"]);const St=()=>{const[e,t]=P(),[n,s]=P([]),[l,i]=P("setup"),c=u=>{t(u),i("chat")},o=u=>{s(u),i("raffle")},f=()=>{s(JSON.parse(localStorage.getItem("previous"))),i("raffle")};return v(Ve,{get children(){return[v(ne,{get when(){return l()==="setup"},get children(){return v(ot,{onStart:c,loadPrevious:f})}}),v(ne,{get when(){return l()==="chat"},get children(){return v(pt,{get settings(){return e()},onNext:o})}}),v(ne,{get when(){return l()==="raffle"},get children(){return v($t,{get initialSelected(){return n()}})}})]}})};Ke(()=>v(St,{}),document.getElementById("root"));
